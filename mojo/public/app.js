/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/app.ts":
/*!********************!*\
  !*** ./src/app.ts ***!
  \********************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nvar nnsbbs_1 = __importDefault(__webpack_require__(/*! ./nnsbbs */ \"./src/nnsbbs.ts\"));\r\nvar readSet_1 = __webpack_require__(/*! ./readSet */ \"./src/readSet.ts\");\r\nvar nb = new nnsbbs_1.default();\r\nwindow.nssbss = nb;\r\n$(function () {\r\n    $('#main').html(nb.html());\r\n    nb.bind();\r\n    nb.gm.setSize();\r\n    // set_main_size();\r\n});\r\n$(window).on('resize', function () {\r\n    nb.gm.setSize();\r\n    // set_main_size();\r\n});\r\nvar rs = new readSet_1.ReadSet('1-9');\r\nconsole.log(rs.toJson());\r\nrs.sub_range(5, 6);\r\nconsole.log(rs.toJson());\r\nrs.sub_range(8, 8);\r\nconsole.log(rs.toJson());\r\n\n\n//# sourceURL=webpack://nnsbbs/./src/app.ts?");

/***/ }),

/***/ "./src/article.ts":
/*!************************!*\
  !*** ./src/article.ts ***!
  \************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.ArticlePane = void 0;\r\nvar util_1 = __webpack_require__(/*! ./util */ \"./src/util.ts\");\r\nvar tag_1 = __webpack_require__(/*! ./tag */ \"./src/tag.ts\");\r\nvar pane_1 = __webpack_require__(/*! ./pane */ \"./src/pane.ts\");\r\n;\r\nvar ArticlePane = /** @class */ (function (_super) {\r\n    __extends(ArticlePane, _super);\r\n    function ArticlePane(id) {\r\n        var _this = _super.call(this, id) || this;\r\n        _this.data = null;\r\n        _this.bDispHeader = false; // 記事のヘッダー部を表示するか\r\n        _this.id_header = _this.id + \"-header\";\r\n        _this.clear();\r\n        _this.toolbar.title = 'Article';\r\n        return _this;\r\n    }\r\n    ArticlePane.prototype.clear = function () {\r\n        this.data = { content: \"\", date: \"\", author: \"\", title: \"\" };\r\n    };\r\n    ArticlePane.prototype.html = function () {\r\n        return tag_1.div({ id: this.id }, this.inner_html());\r\n    };\r\n    ArticlePane.prototype.inner_html = function () {\r\n        var d = this.data;\r\n        var header = d && d.header ? d.header : \"\";\r\n        var content = d ? d.content : \"\";\r\n        return this.toolbar.html() +\r\n            tag_1.div({ class: 'article' }, tag_1.div({ class: 'article-header', id: this.id_header }, header), tag_1.div({ class: 'article-body' }, content), tag_1.div({ class: 'article-end' }, \"--- End ---\"));\r\n    };\r\n    ArticlePane.prototype.bind = function () {\r\n        _super.prototype.bind.call(this);\r\n        if (!this.bDispHeader)\r\n            $('#' + this.id_header).addClass('no-display');\r\n    };\r\n    ArticlePane.prototype.open = function (newsgroup_id, article_id) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var data, c, i;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, util_1.get_json('/api/article', { data: { newsgroup_id: newsgroup_id, article_id: article_id } })];\r\n                    case 1:\r\n                        data = _a.sent();\r\n                        c = data.content;\r\n                        i = c.indexOf('\\n\\n');\r\n                        if (i >= 0) {\r\n                            data['header'] = c.substring(0, i);\r\n                            data['content'] = c.substring(i + 2);\r\n                        }\r\n                        else {\r\n                            data['header'] = \"\";\r\n                        }\r\n                        this.data = data;\r\n                        this.toolbar.title =\r\n                            tag_1.span({ class: 'id' }, '[' + article_id + ']') +\r\n                                tag_1.span({ class: 'author' }, data.author) +\r\n                                tag_1.span({ class: 'date' }, data.date) +\r\n                                tag_1.span({ class: 'title' }, data.title);\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ArticlePane.prototype.setHeaderDisp = function (bDisp) {\r\n        if (bDisp)\r\n            $('#' + this.id_header).removeClass('no-display');\r\n        else\r\n            $('#' + this.id_header).addClass('no-display');\r\n        this.bDispHeader = bDisp;\r\n    };\r\n    ArticlePane.prototype.toggle_header = function () {\r\n        this.setHeaderDisp(!this.bDispHeader);\r\n    };\r\n    return ArticlePane;\r\n}(pane_1.ToolbarPane));\r\nexports.ArticlePane = ArticlePane;\r\n\n\n//# sourceURL=webpack://nnsbbs/./src/article.ts?");

/***/ }),

/***/ "./src/gemotry_manager.ts":
/*!********************************!*\
  !*** ./src/gemotry_manager.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.GeometryManager = void 0;\r\nvar GeometryManager = /** @class */ (function () {\r\n    function GeometryManager(id) {\r\n        this.panes = [];\r\n        this.totalSize = 800;\r\n        this.id = id;\r\n    }\r\n    GeometryManager.prototype.add = function () {\r\n        var panes = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            panes[_i] = arguments[_i];\r\n        }\r\n        for (var _a = 0, panes_1 = panes; _a < panes_1.length; _a++) {\r\n            var pane = panes_1[_a];\r\n            this.panes.push(pane);\r\n            pane.gm = this;\r\n        }\r\n    };\r\n    GeometryManager.prototype.html = function () {\r\n        var s = \"\";\r\n        for (var _i = 0, _a = this.panes; _i < _a.length; _i++) {\r\n            var pane = _a[_i];\r\n            s += pane.html();\r\n        }\r\n        return s;\r\n    };\r\n    GeometryManager.prototype.bind = function () {\r\n        for (var _i = 0, _a = this.panes; _i < _a.length; _i++) {\r\n            var pane = _a[_i];\r\n            pane.bind();\r\n        }\r\n    };\r\n    GeometryManager.prototype.setSize = function (n) {\r\n        if (n === void 0) { n = undefined; }\r\n        var size = n;\r\n        if (!size) {\r\n            size = $(window).height() || 800;\r\n            size -= 80;\r\n        }\r\n        this.totalSize = size;\r\n        $('#' + this.id).css('height', size + 'px');\r\n    };\r\n    GeometryManager.prototype.update = function () {\r\n        var freePanes = [];\r\n        var size = this.totalSize;\r\n        var ratio_sum = 0;\r\n        for (var _i = 0, _a = this.panes; _i < _a.length; _i++) {\r\n            var pane = _a[_i];\r\n            pane.update();\r\n            if (pane.bFixSize) {\r\n                var h = pane.getSize();\r\n                size -= h + 20;\r\n            }\r\n            else if (!pane.bClosed) {\r\n                freePanes.push(pane);\r\n                ratio_sum += pane.expansion_ratio;\r\n            }\r\n        }\r\n        if (freePanes.length > 0) {\r\n            var h = size - 20;\r\n            for (var _b = 0, freePanes_1 = freePanes; _b < freePanes_1.length; _b++) {\r\n                var pane = freePanes_1[_b];\r\n                var hh = h * pane.expansion_ratio / ratio_sum;\r\n                pane.setSize(hh);\r\n            }\r\n        }\r\n    };\r\n    return GeometryManager;\r\n}());\r\nexports.GeometryManager = GeometryManager;\r\n\n\n//# sourceURL=webpack://nnsbbs/./src/gemotry_manager.ts?");

/***/ }),

/***/ "./src/newsgroup.ts":
/*!**************************!*\
  !*** ./src/newsgroup.ts ***!
  \**************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.NewsGroupsPane = void 0;\r\nvar tag_1 = __webpack_require__(/*! ./tag */ \"./src/tag.ts\");\r\nvar pane_1 = __webpack_require__(/*! ./pane */ \"./src/pane.ts\");\r\nvar readSet_1 = __webpack_require__(/*! ./readSet */ \"./src/readSet.ts\");\r\n;\r\n;\r\n;\r\nvar NewsGroupsPane = /** @class */ (function (_super) {\r\n    __extends(NewsGroupsPane, _super);\r\n    function NewsGroupsPane(id) {\r\n        var _this = _super.call(this, id) || this;\r\n        _this.data = [];\r\n        _this.clickCb = null;\r\n        _this.subsInfo = {};\r\n        _this.savedSubsString = \"\";\r\n        _this.id_lg = id + \"_lg\";\r\n        _this.toolbar.title = 'NewsGroup';\r\n        return _this;\r\n        // this.toolbar.add_btn(new Btn({ icon: 'caret-right' }));\r\n        // this.toolbar.add_btn(new Btn({ icon: 'caret-down-fill' }));\r\n        // this.toolbar.add_btn(new Btn({ icon: 'gear-fill' }));\r\n        // this.toolbar.add_btn(new Btn({ icon: 'x-square' }));\r\n    }\r\n    NewsGroupsPane.prototype.setData = function (data) {\r\n        this.data = data;\r\n    };\r\n    NewsGroupsPane.prototype.setClickCb = function (cb) {\r\n        this.clickCb = cb;\r\n    };\r\n    NewsGroupsPane.prototype.html = function () {\r\n        return tag_1.div({ id: this.id }, this.inner_html());\r\n    };\r\n    NewsGroupsPane.prototype.inner_html = function () {\r\n        var s = \"\";\r\n        for (var _i = 0, _a = this.data; _i < _a.length; _i++) {\r\n            var d = _a[_i];\r\n            var si = this.subsInfo[d.name];\r\n            if (!si)\r\n                si = { subscribe: false, read: new readSet_1.ReadSet() };\r\n            var unread = d.max_id;\r\n            var c = \"\";\r\n            var opt = { type: 'checkbox', class: 'newsgroup-check', title: 'ニュースグループを購読' };\r\n            if (si.subscribe)\r\n                opt['checked'] = 1;\r\n            c += tag_1.input(opt);\r\n            c += tag_1.span({ class: 'newsgroup-name' }, d.name);\r\n            if (si)\r\n                unread = d.max_id - si.read.count();\r\n            c += tag_1.span({ class: 'newsgroup-status' }, '(', tag_1.span({ class: 'unread', title: '未読記事数' }, unread), '/', tag_1.span({ class: 'max-id', title: '総記事数' }, d.max_id), ')');\r\n            var opt2 = { class: 'newsgroup-line', 'newsgroup-id': d.id, 'newsgroup-name': d.name };\r\n            if (si.subscribe)\r\n                opt2.class += \" subscribe\";\r\n            s += tag_1.button(opt2, c);\r\n        }\r\n        return _super.prototype.html.call(this) +\r\n            tag_1.div({ class: 'newsgroup' }, tag_1.div({ id: this.id_lg, class: 'nb-list-group' }, s));\r\n    };\r\n    NewsGroupsPane.prototype.bind = function () {\r\n        var _this = this;\r\n        _super.prototype.bind.call(this);\r\n        $(\"#\" + this.id_lg + \" >button\").on('click', function (ev) {\r\n            var t = ev.currentTarget;\r\n            var ng_id = t.attributes['newsgroup-id'].value;\r\n            if (_this.clickCb)\r\n                _this.clickCb(ng_id);\r\n        });\r\n        $(\"#\" + this.id_lg + \" .newsgroup-line .newsgroup-check\").on('change', function (ev) {\r\n            console.log('change');\r\n            var target = ev.currentTarget;\r\n            var parent = target.parentElement;\r\n            if (parent) {\r\n                var newsgroup = parent.attributes['newsgroup-name'].value;\r\n                if (!_this.subsInfo[newsgroup])\r\n                    _this.subsInfo[newsgroup] = { subscribe: false, read: new readSet_1.ReadSet() };\r\n                var subscribe = $(target).is(':checked');\r\n                _this.subsInfo[newsgroup].subscribe = subscribe;\r\n                if (subscribe)\r\n                    $(parent).addClass('subscribe');\r\n                else\r\n                    $(parent).removeClass('subscribe');\r\n                console.log(newsgroup, subscribe);\r\n                _this.saveSubsInfo();\r\n            }\r\n        });\r\n    };\r\n    NewsGroupsPane.prototype.select_newsgroup = function (id) {\r\n        $(\"#\" + this.id_lg + \" >button\").removeClass('active');\r\n        $(\"#\" + this.id_lg + \" >button[newsgroup-id=\" + id + \"]\").addClass('active');\r\n    };\r\n    NewsGroupsPane.prototype.id2name = function (id) {\r\n        for (var _i = 0, _a = this.data; _i < _a.length; _i++) {\r\n            var ng = _a[_i];\r\n            if (ng.id == id)\r\n                return ng.name;\r\n        }\r\n        return null;\r\n    };\r\n    NewsGroupsPane.prototype.name2id = function (name) {\r\n        for (var _i = 0, _a = this.data; _i < _a.length; _i++) {\r\n            var ng = _a[_i];\r\n            if (ng.name == name)\r\n                return ng.id;\r\n        }\r\n        return null;\r\n    };\r\n    // 購読情報を読み込む\r\n    NewsGroupsPane.prototype.loadSubsInfo = function (json_data) {\r\n        if (json_data === void 0) { json_data = null; }\r\n        if (!json_data)\r\n            json_data = localStorage.getItem('nnsbbsSubsInfo');\r\n        if (json_data) {\r\n            var data = JSON.parse(json_data);\r\n            var subsInfo = {};\r\n            for (var ng in data) {\r\n                var s = data[ng];\r\n                subsInfo[ng] = {\r\n                    subscribe: s.subscribe,\r\n                    read: new readSet_1.ReadSet(s.read)\r\n                };\r\n            }\r\n            this.subsInfo = subsInfo;\r\n            this.savedSubsString = json_data;\r\n        }\r\n    };\r\n    // 購読情報を保存する\r\n    NewsGroupsPane.prototype.saveSubsInfo = function (bForced) {\r\n        if (bForced === void 0) { bForced = false; }\r\n        var subsJson = {};\r\n        for (var ng in this.subsInfo) {\r\n            var s = this.subsInfo[ng];\r\n            subsJson[ng] = {\r\n                subscribe: s.subscribe,\r\n                read: s.read.toString()\r\n            };\r\n        }\r\n        var str = JSON.stringify(subsJson, null, 2);\r\n        if (bForced || str != this.savedSubsString) {\r\n            localStorage.setItem('nnsbbsSubsInfo', str);\r\n            this.savedSubsString = str;\r\n        }\r\n    };\r\n    return NewsGroupsPane;\r\n}(pane_1.ToolbarPane));\r\nexports.NewsGroupsPane = NewsGroupsPane;\r\n\n\n//# sourceURL=webpack://nnsbbs/./src/newsgroup.ts?");

/***/ }),

/***/ "./src/nnsbbs.ts":
/*!***********************!*\
  !*** ./src/nnsbbs.ts ***!
  \***********************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nvar util_1 = __webpack_require__(/*! ./util */ \"./src/util.ts\");\r\nvar newsgroup_1 = __webpack_require__(/*! ./newsgroup */ \"./src/newsgroup.ts\");\r\nvar titles_1 = __webpack_require__(/*! ./titles */ \"./src/titles.ts\");\r\nvar article_1 = __webpack_require__(/*! ./article */ \"./src/article.ts\");\r\nvar toolbar_1 = __webpack_require__(/*! ./toolbar */ \"./src/toolbar.ts\");\r\nvar gemotry_manager_1 = __webpack_require__(/*! ./gemotry_manager */ \"./src/gemotry_manager.ts\");\r\nvar NssBss = /** @class */ (function () {\r\n    function NssBss() {\r\n        var _this = this;\r\n        this.ng_pane = new newsgroup_1.NewsGroupsPane('newsgroup');\r\n        this.titles_pane = new titles_1.TitlesPane('titles');\r\n        this.article_pane = new article_1.ArticlePane('article');\r\n        this.cur_newsgroup = \"\";\r\n        this.cur_newsgroup_id = 0;\r\n        this.gm = new gemotry_manager_1.GeometryManager('main');\r\n        this.gm.add(this.ng_pane, this.titles_pane, this.article_pane);\r\n        this.ng_pane.expansion_ratio = 1;\r\n        this.titles_pane.expansion_ratio = 2;\r\n        this.article_pane.expansion_ratio = 4;\r\n        // newsgroupペーンのボタン\r\n        this.ng_pane.toolbar.add_btn(new toolbar_1.Btn({\r\n            icon: 'check-all',\r\n            explain: '全てのニュースグループを表示',\r\n            action: function () {\r\n                $('#newsgroup_lg').removeClass('hide-not-subscribed');\r\n            }\r\n        })).add_btn(new toolbar_1.Btn({\r\n            icon: 'check',\r\n            explain: '購読中のニュースグループのみ表示',\r\n            action: function () {\r\n                $('#newsgroup_lg').addClass('hide-not-subscribed');\r\n            }\r\n        }));\r\n        // titleペーンのボタン\r\n        this.titles_pane.toolbar.add_btn(new toolbar_1.Btn({\r\n            icon: 'x-square',\r\n            explain: 'タイトル・記事領域を閉じる',\r\n            action: function () {\r\n                _this.titles_pane.close();\r\n                _this.article_pane.close();\r\n                window.history.pushState(null, '', '/');\r\n                document.title = 'nnsbbs';\r\n            }\r\n        })).add_btn(new toolbar_1.BtnDropdown({\r\n            icon: 'three-dots',\r\n            explain: '表示設定',\r\n            dropdown: [\r\n                {\r\n                    name: 'スレッド表示',\r\n                    action: function () {\r\n                        console.log('スレッド表示');\r\n                        _this.titles_pane.disp_thread(true);\r\n                    }\r\n                },\r\n                {\r\n                    name: '投稿順表示',\r\n                    action: function () {\r\n                        console.log('投稿順表示');\r\n                        _this.titles_pane.disp_thread(false);\r\n                    }\r\n                },\r\n            ]\r\n        })).add_btn(new toolbar_1.Btn({\r\n            icon: 'chevron-bar-down',\r\n            explain: '最後に移動',\r\n            action: function () {\r\n                var div1 = $('#' + _this.titles_pane.id + ' .titles')[0];\r\n                var h1 = $(div1).height();\r\n                var div2 = $('#titles_lg')[0];\r\n                var h2 = $(div2).height();\r\n                if (h1 && h2)\r\n                    div1.scrollTop = h2 - h1 + 10;\r\n            }\r\n        })).add_btn(new toolbar_1.Btn({\r\n            icon: 'chevron-bar-up',\r\n            explain: '先頭に移動',\r\n            action: function () {\r\n                var div = $('#' + _this.titles_pane.id + ' .titles')[0];\r\n                div.scrollTop = 0;\r\n            }\r\n        }));\r\n        this.article_pane.toolbar.add_btn(new toolbar_1.Btn({\r\n            icon: 'x-square',\r\n            explain: '記事領域を閉じる',\r\n            action: function () {\r\n                _this.article_pane.close();\r\n                window.history.pushState(null, '', \"/\" + _this.cur_newsgroup);\r\n                document.title = \"nnsbbs/\" + _this.cur_newsgroup;\r\n            }\r\n        }));\r\n        this.article_pane.toolbar.add_btn(new toolbar_1.Btn({\r\n            icon: 'card-heading',\r\n            explain: '記事のヘッダの表示を切替',\r\n            action: function () {\r\n                _this.article_pane.toggle_header();\r\n            }\r\n        }));\r\n        this.ng_pane.loadSubsInfo();\r\n    }\r\n    NssBss.prototype.html = function () {\r\n        return this.gm.html();\r\n    };\r\n    NssBss.prototype.bind = function () {\r\n        var _this = this;\r\n        this.gm.bind();\r\n        this.ng_pane.setClickCb(function (id) {\r\n            _this.select_newsgroup(id);\r\n        });\r\n        this.titles_pane.setClickCb(function (newsgroup_id, article_id) {\r\n            _this.select_article(newsgroup_id, article_id);\r\n        });\r\n    };\r\n    NssBss.prototype.top_page = function (newsgroup, article_id) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var data, id;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, util_1.get_json('/api/newsgroup')];\r\n                    case 1:\r\n                        data = _a.sent();\r\n                        this.ng_pane.setData(data);\r\n                        $('#newsgroup').html(this.ng_pane.inner_html());\r\n                        this.ng_pane.bind();\r\n                        if (!(newsgroup == \"\")) return [3 /*break*/, 2];\r\n                        this.titles_pane.close();\r\n                        this.article_pane.close();\r\n                        return [3 /*break*/, 4];\r\n                    case 2: return [4 /*yield*/, this.select_newsgroup(newsgroup)];\r\n                    case 3:\r\n                        _a.sent();\r\n                        if (article_id == \"\") {\r\n                            this.article_pane.close();\r\n                        }\r\n                        else {\r\n                            id = parseInt(article_id);\r\n                            this.select_article(this.cur_newsgroup_id, id);\r\n                        }\r\n                        _a.label = 4;\r\n                    case 4: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    NssBss.prototype.select_newsgroup = function (newsgroup) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var id, name;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (typeof newsgroup == 'number') {\r\n                            id = newsgroup;\r\n                            name = this.ng_pane.id2name(id);\r\n                            if (!name)\r\n                                throw Error(\"newsgroup_id:\" + id + \" not found\");\r\n                        }\r\n                        else if (/\\d+/.test(newsgroup)) {\r\n                            id = parseInt(newsgroup);\r\n                            name = this.ng_pane.id2name(id);\r\n                            if (!name)\r\n                                throw Error(\"newsgroup_id:\" + id + \" not found\");\r\n                        }\r\n                        else {\r\n                            id = this.ng_pane.name2id(newsgroup);\r\n                            name = newsgroup;\r\n                            if (!id)\r\n                                throw Error(\"newsgroup:\" + newsgroup + \" not found\");\r\n                        }\r\n                        this.ng_pane.select_newsgroup(id);\r\n                        this.article_pane.clear();\r\n                        $('#article').html(this.article_pane.inner_html());\r\n                        return [4 /*yield*/, this.titles_pane.open(id, name)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        $('#titles').html(this.titles_pane.inner_html());\r\n                        this.titles_pane.bind();\r\n                        this.titles_pane.show();\r\n                        this.article_pane.close();\r\n                        window.history.pushState(null, '', \"/\" + name);\r\n                        document.title = \"nnsbbs/\" + name;\r\n                        this.cur_newsgroup = name;\r\n                        this.cur_newsgroup_id = id;\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    NssBss.prototype.select_article = function (newsgroup_id, article_id) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.article_pane.open(newsgroup_id, article_id)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        this.titles_pane.select_article(article_id);\r\n                        $('#article').html(this.article_pane.inner_html());\r\n                        this.article_pane.show();\r\n                        this.article_pane.bind();\r\n                        window.history.pushState(null, '', \"/\" + this.cur_newsgroup + \"/\" + article_id);\r\n                        document.title = \"nnsbbs/\" + this.cur_newsgroup + \"/\" + article_id;\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return NssBss;\r\n}());\r\nexports.default = NssBss;\r\n\n\n//# sourceURL=webpack://nnsbbs/./src/nnsbbs.ts?");

/***/ }),

/***/ "./src/pane.ts":
/*!*********************!*\
  !*** ./src/pane.ts ***!
  \*********************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.ToolbarPane = exports.Pane = void 0;\r\nvar toolbar_1 = __webpack_require__(/*! ./toolbar */ \"./src/toolbar.ts\");\r\nvar pane_sn = 0;\r\nvar Pane = /** @class */ (function () {\r\n    function Pane(id) {\r\n        if (id === void 0) { id = null; }\r\n        this.bFixSize = false;\r\n        this.bClosed = false;\r\n        this.natural_size = 200;\r\n        this.min_size = 10;\r\n        this.gm = null;\r\n        this.expansion_ratio = 1; // 拡張して領域を分割する場合の重み付け\r\n        if (id)\r\n            this.id = id;\r\n        else\r\n            this.id = \"pane-\" + pane_sn++;\r\n    }\r\n    Pane.prototype.html = function () {\r\n        return \"\";\r\n    };\r\n    Pane.prototype.bind = function () { };\r\n    Pane.prototype.setSize = function (size) {\r\n        $('#' + this.id).css('height', size + \"px\");\r\n    };\r\n    Pane.prototype.getSize = function () {\r\n        return $('#' + this.id).height() || 100;\r\n    };\r\n    Pane.prototype.close = function () {\r\n        var _a;\r\n        this.bClosed = true;\r\n        $('#' + this.id).addClass(\"no-display\");\r\n        (_a = this.gm) === null || _a === void 0 ? void 0 : _a.update();\r\n    };\r\n    Pane.prototype.show = function () {\r\n        var _a;\r\n        this.bClosed = false;\r\n        $('#' + this.id).removeClass(\"no-display\");\r\n        (_a = this.gm) === null || _a === void 0 ? void 0 : _a.update();\r\n    };\r\n    return Pane;\r\n}());\r\nexports.Pane = Pane;\r\nvar ToolbarPane = /** @class */ (function (_super) {\r\n    __extends(ToolbarPane, _super);\r\n    function ToolbarPane(id) {\r\n        var _this = _super.call(this, id) || this;\r\n        _this.toolbar = new toolbar_1.ToolBar(id ? id : '%no-title%');\r\n        return _this;\r\n    }\r\n    ToolbarPane.prototype.html = function () {\r\n        return this.toolbar.html();\r\n    };\r\n    ToolbarPane.prototype.bind = function () {\r\n        var _this = this;\r\n        this.toolbar.bind();\r\n        this.toolbar.setTogleCB(function (bOpen) {\r\n            var _a;\r\n            _this.bFixSize = !bOpen;\r\n            (_a = _this.gm) === null || _a === void 0 ? void 0 : _a.update();\r\n        });\r\n    };\r\n    ToolbarPane.prototype.show = function () {\r\n        _super.prototype.show.call(this);\r\n        this.toolbar.setState(true);\r\n    };\r\n    ToolbarPane.prototype.update = function () {\r\n        if (this.bFixSize) {\r\n            var h0 = $('#' + this.id).height();\r\n            if (h0)\r\n                this.natural_size = h0;\r\n            var h = $('#' + this.id + \" .toolbar\").height();\r\n            if (h)\r\n                this.setSize(h + 10);\r\n        }\r\n        else {\r\n            this.setSize(this.natural_size);\r\n        }\r\n    };\r\n    return ToolbarPane;\r\n}(Pane));\r\nexports.ToolbarPane = ToolbarPane;\r\n\n\n//# sourceURL=webpack://nnsbbs/./src/pane.ts?");

/***/ }),

/***/ "./src/readSet.ts":
/*!************************!*\
  !*** ./src/readSet.ts ***!
  \************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.ReadSet = void 0;\r\nvar ReadSet = /** @class */ (function () {\r\n    function ReadSet(str) {\r\n        if (str === void 0) { str = undefined; }\r\n        this.ranges = [];\r\n        if (str)\r\n            this.fromString(str);\r\n    }\r\n    ReadSet.prototype.fromString = function (str) {\r\n        var length = str.length;\r\n        var start;\r\n        var end;\r\n        this.ranges = [];\r\n        var s = str;\r\n        while (true) {\r\n            var m = s.match(/^\\s+/);\r\n            if (m)\r\n                s = s.substr(m[0].length);\r\n            if (s == \"\")\r\n                break;\r\n            m = s.match(/^\\d+/);\r\n            if (m) {\r\n                start = parseInt(m[0]);\r\n                s = s.substr(m[0].length);\r\n            }\r\n            else\r\n                this.syntaxError(s, str);\r\n            m = s.match(/^-\\s*(\\d+)/);\r\n            if (m) {\r\n                end = parseInt(m[1]);\r\n                s = s.substr(m[0].length);\r\n                this.add_range(start, end);\r\n            }\r\n            else {\r\n                this.add_range(start, start);\r\n            }\r\n            m = s.match(/^\\s+/);\r\n            if (m)\r\n                s = s.substr(m[0].length);\r\n            if (s == \"\")\r\n                break;\r\n            m = s.match(/^,/);\r\n            if (m) {\r\n                s = s.substr(m[0].length);\r\n                continue;\r\n            }\r\n            this.syntaxError(s, str);\r\n        }\r\n    };\r\n    ReadSet.prototype.add_range = function (start, end) {\r\n        if (start <= end) {\r\n            var s = start;\r\n            var e = end;\r\n            var new_ranges = [];\r\n            var r = this.ranges.shift();\r\n            while (r && r[1] < s - 1) {\r\n                new_ranges.push(r);\r\n                r = this.ranges.shift();\r\n            }\r\n            while (r && r[0] <= e + 1) {\r\n                s = Math.min(s, r[0]);\r\n                e = Math.max(e, r[1]);\r\n                r = this.ranges.shift();\r\n            }\r\n            new_ranges.push([s, e]);\r\n            while (r) {\r\n                new_ranges.push(r);\r\n                r = this.ranges.shift();\r\n            }\r\n            this.ranges = new_ranges;\r\n        }\r\n    };\r\n    // @brief 領域を取り除く\r\n    ReadSet.prototype.sub_range = function (start, end) {\r\n        if (start <= end) {\r\n            var s = start;\r\n            var e = end;\r\n            var new_ranges = [];\r\n            var r = this.ranges.shift();\r\n            while (r && r[1] < s) {\r\n                new_ranges.push(r);\r\n                r = this.ranges.shift();\r\n            }\r\n            while (r && r[0] <= e) {\r\n                if (r[0] < s)\r\n                    new_ranges.push([r[0], s - 1]);\r\n                if (e < r[1])\r\n                    new_ranges.push([e + 1, r[1]]);\r\n                r = this.ranges.shift();\r\n            }\r\n            while (r) {\r\n                new_ranges.push(r);\r\n                r = this.ranges.shift();\r\n            }\r\n            this.ranges = new_ranges;\r\n        }\r\n    };\r\n    ReadSet.prototype.syntaxError = function (offendingStr, allString) {\r\n        var pos = allString.length - offendingStr.length;\r\n        throw Error(\"ReadSet SyntaxError: at pos \" + pos + \" of \\\"\" + allString + \"\\\", offending str:\\\"\" + offendingStr + \"\\\"\");\r\n    };\r\n    ReadSet.prototype.toString = function () {\r\n        var s = \"\";\r\n        for (var _i = 0, _a = this.ranges; _i < _a.length; _i++) {\r\n            var r = _a[_i];\r\n            if (s != \"\")\r\n                s += ',';\r\n            if (r[0] == r[1])\r\n                s += r[0];\r\n            else\r\n                s += r[0] + '-' + r[1];\r\n        }\r\n        return s;\r\n    };\r\n    ReadSet.prototype.toJson = function () {\r\n        return JSON.stringify(this.ranges);\r\n    };\r\n    ReadSet.prototype.count = function () {\r\n        var n = 0;\r\n        for (var _i = 0, _a = this.ranges; _i < _a.length; _i++) {\r\n            var r = _a[_i];\r\n            n += r[1] - r[0] + 1;\r\n        }\r\n        return n;\r\n    };\r\n    return ReadSet;\r\n}());\r\nexports.ReadSet = ReadSet;\r\n\n\n//# sourceURL=webpack://nnsbbs/./src/readSet.ts?");

/***/ }),

/***/ "./src/tag.ts":
/*!********************!*\
  !*** ./src/tag.ts ***!
  \********************/
/***/ (function(__unused_webpack_module, exports) {

eval("\r\n// import printf = require('printf');\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\r\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\r\n        to[j] = from[i];\r\n    return to;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.a = exports.li = exports.ul = exports.label = exports.option = exports.select = exports.input = exports.button = exports.img = exports.span = exports.div = exports.tag = void 0;\r\nfunction tag(name) {\r\n    var args = [];\r\n    for (var _i = 1; _i < arguments.length; _i++) {\r\n        args[_i - 1] = arguments[_i];\r\n    }\r\n    var attr = {};\r\n    var html = '<' + name;\r\n    for (var _a = 0, args_1 = args; _a < args_1.length; _a++) {\r\n        var a_1 = args_1[_a];\r\n        if (typeof a_1 == 'object') {\r\n            for (var k in a_1) {\r\n                if (k in attr)\r\n                    attr[k] += ' ' + a_1[k];\r\n                else\r\n                    attr[k] = a_1[k];\r\n            }\r\n        }\r\n    }\r\n    for (var k in attr) {\r\n        html += ' ' + k;\r\n        html += '=\"' + attr[k] + '\"';\r\n        html += k + \"=\" + attr[k];\r\n    }\r\n    html += '>';\r\n    for (var _b = 0, args_2 = args; _b < args_2.length; _b++) {\r\n        var a_2 = args_2[_b];\r\n        if (typeof a_2 == 'string')\r\n            html += a_2;\r\n        else if (typeof a_2 == 'number')\r\n            html += String(a_2);\r\n    }\r\n    html += '</' + name + '>';\r\n    return html;\r\n}\r\nexports.tag = tag;\r\nfunction div() {\r\n    var args = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        args[_i] = arguments[_i];\r\n    }\r\n    return tag.apply(void 0, __spreadArray(['div'], args));\r\n}\r\nexports.div = div;\r\nfunction span() {\r\n    var args = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        args[_i] = arguments[_i];\r\n    }\r\n    return tag.apply(void 0, __spreadArray(['span'], args));\r\n}\r\nexports.span = span;\r\nfunction img() {\r\n    var args = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        args[_i] = arguments[_i];\r\n    }\r\n    return tag.apply(void 0, __spreadArray(['img'], args));\r\n}\r\nexports.img = img;\r\nfunction button() {\r\n    var args = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        args[_i] = arguments[_i];\r\n    }\r\n    return tag.apply(void 0, __spreadArray(['button'], args));\r\n}\r\nexports.button = button;\r\nfunction input() {\r\n    var args = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        args[_i] = arguments[_i];\r\n    }\r\n    return tag.apply(void 0, __spreadArray(['input'], args));\r\n}\r\nexports.input = input;\r\nfunction select() {\r\n    var args = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        args[_i] = arguments[_i];\r\n    }\r\n    return tag.apply(void 0, __spreadArray(['select'], args));\r\n}\r\nexports.select = select;\r\nfunction option() {\r\n    var args = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        args[_i] = arguments[_i];\r\n    }\r\n    return tag.apply(void 0, __spreadArray(['option'], args));\r\n}\r\nexports.option = option;\r\nfunction label() {\r\n    var args = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        args[_i] = arguments[_i];\r\n    }\r\n    return tag.apply(void 0, __spreadArray(['label'], args));\r\n}\r\nexports.label = label;\r\nfunction ul() {\r\n    var args = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        args[_i] = arguments[_i];\r\n    }\r\n    return tag.apply(void 0, __spreadArray(['ul'], args));\r\n}\r\nexports.ul = ul;\r\nfunction li() {\r\n    var args = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        args[_i] = arguments[_i];\r\n    }\r\n    return tag.apply(void 0, __spreadArray(['li'], args));\r\n}\r\nexports.li = li;\r\nfunction a() {\r\n    var args = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        args[_i] = arguments[_i];\r\n    }\r\n    return tag.apply(void 0, __spreadArray(['a'], args));\r\n}\r\nexports.a = a;\r\n\n\n//# sourceURL=webpack://nnsbbs/./src/tag.ts?");

/***/ }),

/***/ "./src/titles.ts":
/*!***********************!*\
  !*** ./src/titles.ts ***!
  \***********************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.TitlesPane = void 0;\r\nvar util_1 = __webpack_require__(/*! ./util */ \"./src/util.ts\");\r\nvar tag_1 = __webpack_require__(/*! ./tag */ \"./src/tag.ts\");\r\nvar pane_1 = __webpack_require__(/*! ./pane */ \"./src/pane.ts\");\r\n;\r\nvar TitlesPane = /** @class */ (function (_super) {\r\n    __extends(TitlesPane, _super);\r\n    function TitlesPane(id) {\r\n        var _this = _super.call(this, id) || this;\r\n        _this.titles = [];\r\n        _this.threads = null;\r\n        _this.newsgroup_name = null;\r\n        _this.newsgroup_id = null;\r\n        _this.bDispTherad = false;\r\n        _this.thread_depth = 20;\r\n        _this.clickCb = null;\r\n        _this.id_lg = id + \"_lg\";\r\n        return _this;\r\n    }\r\n    TitlesPane.prototype.open = function (newsgroup_id, newsgroup_name) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var data, _i, _a, d, id, parent_1;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0: return [4 /*yield*/, util_1.get_json('/api/titles', { data: { newsgroup_id: newsgroup_id } })];\r\n                    case 1:\r\n                        data = _b.sent();\r\n                        this.titles = [];\r\n                        this.threads = [];\r\n                        for (_i = 0, _a = data; _i < _a.length; _i++) {\r\n                            d = _a[_i];\r\n                            id = d.article_id;\r\n                            this.titles[id] = d;\r\n                            parent_1 = this.titles[d.reply_to];\r\n                            if (parent_1) {\r\n                                if (!parent_1.children)\r\n                                    parent_1.children = [];\r\n                                parent_1.children.push(d);\r\n                            }\r\n                            else {\r\n                                this.threads.push(d);\r\n                            }\r\n                        }\r\n                        this.newsgroup_id = newsgroup_id;\r\n                        this.newsgroup_name = newsgroup_name;\r\n                        this.set_title();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    TitlesPane.prototype.setClickCb = function (cb) {\r\n        this.clickCb = cb;\r\n    };\r\n    TitlesPane.prototype.html = function () {\r\n        return tag_1.div({ id: this.id }, this.inner_html());\r\n    };\r\n    TitlesPane.prototype.inner_html = function () {\r\n        var s = \"\";\r\n        if (this.bDispTherad && this.threads) {\r\n            for (var _i = 0, _a = this.threads; _i < _a.length; _i++) {\r\n                var t = _a[_i];\r\n                s += this.thread_html(t, 0);\r\n            }\r\n        }\r\n        else {\r\n            for (var id in this.titles) {\r\n                var d = this.titles[id];\r\n                s += this.title_html(d, 0);\r\n            }\r\n        }\r\n        return this.toolbar.html() + tag_1.div({ class: 'titles' }, tag_1.div({ id: this.id_lg, class: 'nb-list-group' }, s));\r\n    };\r\n    TitlesPane.prototype.thread_html = function (t, depth) {\r\n        var s = this.title_html(t, depth);\r\n        if (t.children) {\r\n            for (var _i = 0, _a = t.children; _i < _a.length; _i++) {\r\n                var c = _a[_i];\r\n                s += this.thread_html(c, depth + this.thread_depth);\r\n            }\r\n        }\r\n        return s;\r\n    };\r\n    TitlesPane.prototype.title_html = function (d, depth) {\r\n        var s = tag_1.button({ article_id: d.article_id }, tag_1.div({ class: 'article-id' }, String(d.article_id)), tag_1.div({ class: 'article-from', title: d.disp_name }, d.disp_name), tag_1.div({ class: 'article-time' }, d.date), tag_1.div({ class: 'article-title', title: d.title, style: \"left: \" + depth + \"px;\" }, d.title));\r\n        return s;\r\n    };\r\n    TitlesPane.prototype.bind = function () {\r\n        var _this = this;\r\n        _super.prototype.bind.call(this);\r\n        $(\"#\" + this.id_lg + \" >button\").on('click', function (ev) {\r\n            var target = ev.currentTarget;\r\n            var article_id = target.attributes['article_id'].value;\r\n            _this.select_article(article_id);\r\n            if (_this.newsgroup_id && _this.clickCb) {\r\n                _this.clickCb(_this.newsgroup_id, article_id);\r\n            }\r\n        });\r\n    };\r\n    TitlesPane.prototype.select_article = function (id) {\r\n        $(\"#\" + this.id_lg + \" >button\").removeClass('active');\r\n        $(\"#\" + this.id_lg + \" >button[article_id=\" + id + \"]\").addClass('active');\r\n    };\r\n    TitlesPane.prototype.disp_thread = function (bThread) {\r\n        this.bDispTherad = bThread;\r\n        this.set_title();\r\n        $('#' + this.id).html(this.inner_html());\r\n        this.bind();\r\n    };\r\n    TitlesPane.prototype.set_title = function () {\r\n        var s = \"\";\r\n        s += tag_1.span({ class: 'newsgroup-name' }, this.newsgroup_name || \"\");\r\n        s += tag_1.span({ class: 'disp-mode' }, this.bDispTherad ? '[スレッド表示]' : '[投稿順表示]');\r\n        this.toolbar.title = s;\r\n    };\r\n    return TitlesPane;\r\n}(pane_1.ToolbarPane));\r\nexports.TitlesPane = TitlesPane;\r\n\n\n//# sourceURL=webpack://nnsbbs/./src/titles.ts?");

/***/ }),

/***/ "./src/toolbar.ts":
/*!************************!*\
  !*** ./src/toolbar.ts ***!
  \************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.BtnDropdown = exports.Btn = exports.ToolBar = void 0;\r\nvar tag_1 = __webpack_require__(/*! ./tag */ \"./src/tag.ts\");\r\nvar sn = 0;\r\nvar ToolBar = /** @class */ (function () {\r\n    function ToolBar(title) {\r\n        if (title === void 0) { title = \"\"; }\r\n        this.btns = [];\r\n        this.open_icon_name = 'bi-caret-down-fill';\r\n        this.close_icon_name = 'bi-caret-right-fill';\r\n        this.bOpen = true;\r\n        this.toggle_cb = null;\r\n        this.id = \"toolbar-\" + sn++;\r\n        this.id_chk = this.id + \"-chk\";\r\n        if (title != \"\")\r\n            this.title = title;\r\n        else\r\n            this.title = this.id;\r\n    }\r\n    ToolBar.prototype.html = function () {\r\n        var s = tag_1.tag('i', { id: this.id_chk, class: this.bOpen ? this.open_icon_name : this.close_icon_name });\r\n        s += tag_1.span({ class: 'toolbar-title' }, this.title);\r\n        for (var _i = 0, _a = this.btns; _i < _a.length; _i++) {\r\n            var btn = _a[_i];\r\n            s += btn.html();\r\n        }\r\n        return tag_1.div({ class: 'toolbar', id: this.id }, s);\r\n    };\r\n    ToolBar.prototype.bind = function () {\r\n        var _this = this;\r\n        $('#' + this.id_chk).on('click', function () {\r\n            _this.setState(!_this.bOpen);\r\n        });\r\n        for (var _i = 0, _a = this.btns; _i < _a.length; _i++) {\r\n            var btn = _a[_i];\r\n            btn.bind();\r\n        }\r\n    };\r\n    ToolBar.prototype.add_btn = function (btn) {\r\n        this.btns.unshift(btn); // 最初に追加\r\n        return this;\r\n    };\r\n    ToolBar.prototype.setState = function (bOpen) {\r\n        this.bOpen = bOpen;\r\n        if (bOpen) {\r\n            $('#' + this.id_chk).removeClass(this.close_icon_name);\r\n            $('#' + this.id_chk).addClass(this.open_icon_name);\r\n            $('#' + this.id).removeClass('closed');\r\n        }\r\n        else {\r\n            $('#' + this.id_chk).addClass(this.close_icon_name);\r\n            $('#' + this.id_chk).removeClass(this.open_icon_name);\r\n            $('#' + this.id).addClass('closed');\r\n        }\r\n        if (this.toggle_cb)\r\n            this.toggle_cb(bOpen);\r\n    };\r\n    ToolBar.prototype.setTogleCB = function (cb) {\r\n        this.toggle_cb = cb;\r\n    };\r\n    ToolBar.prototype.setTitle = function (title) {\r\n        this.title = title;\r\n        $(\"#\" + this.id + \" .toolbar-title\").html(title);\r\n    };\r\n    return ToolBar;\r\n}());\r\nexports.ToolBar = ToolBar;\r\n;\r\nvar btn_sn = 0;\r\nvar Btn = /** @class */ (function () {\r\n    function Btn(opt) {\r\n        this.opt = opt;\r\n        this.id = 'toolbar-btn-' + btn_sn++;\r\n    }\r\n    Btn.prototype.html = function () {\r\n        var opt = { id: this.id, class: \"bi-\" + this.opt.icon };\r\n        if (this.opt.explain) {\r\n            opt['title'] = this.opt.explain;\r\n            opt['data-toggle'] = 'tooltip';\r\n        }\r\n        return tag_1.button(tag_1.tag('i', opt));\r\n    };\r\n    Btn.prototype.bind = function () {\r\n        var _this = this;\r\n        $('#' + this.id).on('click', function (e) {\r\n            if (_this.opt.action)\r\n                _this.opt.action(e, _this);\r\n        });\r\n    };\r\n    return Btn;\r\n}());\r\nexports.Btn = Btn;\r\n;\r\nvar BtnDropdown = /** @class */ (function (_super) {\r\n    __extends(BtnDropdown, _super);\r\n    function BtnDropdown(opt) {\r\n        var _this = _super.call(this, opt) || this;\r\n        _this.opt = opt;\r\n        return _this;\r\n    }\r\n    BtnDropdown.prototype.html = function () {\r\n        var id_btn = this.id + '-btn';\r\n        var dm = \"\";\r\n        var cnt = 0;\r\n        for (var _i = 0, _a = this.opt.dropdown; _i < _a.length; _i++) {\r\n            var dd = _a[_i];\r\n            var id_dd = id_btn + '-' + cnt++;\r\n            var attr = { class: 'dropdown-item', href: '#', id: id_dd };\r\n            if (dd.explain) {\r\n                attr['title'] = dd.explain;\r\n                attr['data-toggle'] = 'tooltip';\r\n            }\r\n            dm += tag_1.li(tag_1.a(attr, dd.name));\r\n        }\r\n        var btn_attr = {\r\n            class: 'dropdown-toggle',\r\n            type: 'button',\r\n            id: id_btn,\r\n            'data-toggle': 'dropdown',\r\n            'aria-haspopup': true,\r\n            'aria-expanded': false\r\n        };\r\n        if (this.opt.explain) {\r\n            btn_attr['title'] = this.opt.explain;\r\n        }\r\n        return tag_1.div({ class: 'dropdown' }, tag_1.button(btn_attr, tag_1.tag('i', { class: 'bi-' + this.opt.icon })), tag_1.ul({\r\n            class: 'dropdown-menu',\r\n            'aria-labelledby': id_btn\r\n        }, dm));\r\n    };\r\n    BtnDropdown.prototype.bind = function () {\r\n        var id_btn = this.id + '-btn';\r\n        var cnt = 0;\r\n        var _loop_1 = function (dd) {\r\n            var id_dd = id_btn + '-' + cnt++;\r\n            if (dd.action) {\r\n                $('#' + id_dd).on('click', function (e) {\r\n                    if (dd.action)\r\n                        dd.action();\r\n                    e.preventDefault();\r\n                });\r\n            }\r\n        };\r\n        for (var _i = 0, _a = this.opt.dropdown; _i < _a.length; _i++) {\r\n            var dd = _a[_i];\r\n            _loop_1(dd);\r\n        }\r\n    };\r\n    return BtnDropdown;\r\n}(Btn));\r\nexports.BtnDropdown = BtnDropdown;\r\n\n\n//# sourceURL=webpack://nnsbbs/./src/toolbar.ts?");

/***/ }),

/***/ "./src/util.ts":
/*!*********************!*\
  !*** ./src/util.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, exports) => {

eval("\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.get_json = void 0;\r\nfunction get_json(path, option) {\r\n    if (option === void 0) { option = {}; }\r\n    var opt = { url: path, type: \"GET\", dataType: \"json\" };\r\n    for (var key in option)\r\n        opt[key] = option[key];\r\n    console.log(\"get_json:\", path, JSON.stringify(option));\r\n    var tStart = performance.now();\r\n    return new Promise(function (resolve, reject) {\r\n        opt['success'] = function (data, dataType) {\r\n            console.log('get_json:', path, \"succeeded.  time:\", (performance.now() - tStart).toFixed(1), \"ms\");\r\n            resolve(data);\r\n        };\r\n        opt['error'] = function (xhr, ts, es) {\r\n            console.log('get_json:', path, \"error.  time:\", (performance.now() - tStart).toFixed(1), \"ms\");\r\n            reject(ts);\r\n        };\r\n        $.ajax(opt);\r\n    });\r\n}\r\nexports.get_json = get_json;\r\n\n\n//# sourceURL=webpack://nnsbbs/./src/util.ts?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module is referenced by other modules so it can't be inlined
/******/ 	var __webpack_exports__ = __webpack_require__("./src/app.ts");
/******/ 	
/******/ })()
;